<!-- Modal title -->
<div class="modal-header justify-content-center align-items-center">
    <h6 class="modal-title">
        {{ (documentToEdit ? 'documents.cu-modal.title.edit' : 'documents.cu-modal.title.create') | translate }}
    </h6>
</div>

<!-- Modal body -->
<div class="modal-body">
    <form [formGroup]="documentForm" (submit)="submit()">

        <!--Document input-->
        <c-row class="mb-3">
            <c-col [md]="12">
                <label cLabel for="value"
                       class="required">{{ 'documents.commons.form.document-input.label'|translate }}</label>
                <c-input-group>
                    <c-dropdown>
                        <button cButton cDropdownToggle color="secondary" variant="outline" type="button">
                            {{ 'documents.commons.form.type-input.values.'.concat(documentForm.value?.type)|translate }}
                        </button>
                        <div cDropdownMenu>
                            <button cDropdownItem *ngFor="let documentType of documentTypes"
                                    (click)="setDocumentType(documentType)" type="button">
                                {{ 'documents.commons.form.type-input.values.'.concat(documentType)|translate }}
                            </button>
                        </div>
                    </c-dropdown>
                    <input id="value" cFormControl formControlName="value" type="text"/>
                </c-input-group>
                @if (((documentForm.get('value')?.touched || documentForm.get('value')?.dirty))) {
                    @if (documentForm.controls['value'].hasError('required')) {
                        <c-form-feedback [valid]="false">{{ 'commons.errors.required'|translate }}</c-form-feedback>
                    }
                }
            </c-col>


        </c-row>

        <!--Expiration date input-->
        <c-row class="mb-3">
            <c-col [md]="12">
              <label cLabel for="expiration-date-input"
                       class="required">{{ 'documents.commons.form.expiration-input.label'|translate }}</label>
              <div *ngIf="!isNavigating">
                <input
                  type="text"
                  class="form-control"
                  ngxDaterangepickerBootstrap
                  [(ngModel)]="expirationDateModel"
                  [ngModelOptions]="{standalone: true}"
                  [locale]="datePickerLocale"
                  [singleDatePicker]="true"
                  (datesUpdated)="onExpirationDateChange($event)"
                  id="expiration-date-input"
                />
              </div>
                @if (((documentForm.get('expirationDate')?.touched || documentForm.get('expirationDate')?.dirty))) {
                    @if (documentForm.controls['expirationDate'].hasError('required')) {
                        <c-form-feedback [valid]="false">{{ 'commons.errors.required'|translate }}</c-form-feedback>
                    }
                }
            </c-col>
        </c-row>

        <!--Document image-->
        <c-row>
            <c-col [md]="12">
                <label cLabel for="file"
                       class="required">{{ 'documents.commons.form.file-input.label' | translate }}</label>

                @if (imageUrl) {
                    <div class="image-wrapper cover mb-3 position-relative">
                        <img [src]="imageUrl" alt="Cover" class="img-fluid rounded shadow w-100"/>
                        <div class="image-overlay d-none">
                            <button class="btn btn-danger btn-sm me-2" title="Delete" type="button"
                                    (click)="removeImage()"><i class="bi bi-trash"></i></button>
                        </div>
                    </div>
                } @else {
                    <label class="upload-placeholder-first w-100 mb-3">
                        <input type="file" (change)="onFileSelected($event)" hidden/>
                        <div class="image-wrapper d-flex flex-column align-items-center justify-content-center text-center">
                            <img class="img-fluid" src="assets/images/animations/image-placeholder.gif" alt="">
                            <span class="text-info-emphasis">
                {{ 'documents.commons.form.file-input.placeholder' | translate }}
              </span>
                        </div>
                    </label>
                }

            </c-col>
        </c-row>

        <!-- Modal footer -->
        <c-row class="mt-3">
            <c-col class="d-flex justify-content-end">
                <button cButton class="ms-1" color="light" size="sm" variant="ghost" (click)="closeModal()">
                    {{ 'commons.form.cancel-btn' | translate }}
                </button>
                <button cButton class="ms-1" color="primary" size="sm" type="submit" [disabled]="!documentForm.valid">
                    {{ 'commons.form.save-btn' | translate }}
                </button>
            </c-col>
        </c-row>
    </form>
</div>
